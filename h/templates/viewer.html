<ul class="sliding-panels">

  <!-- Summaries -->
  <li ng-class="detail && 'squished' || ''"
      class="annotator-outer annotator-viewer">
    <ul>
      <li data-ng-click="showDetail(annotation)"
          data-ng-mouseenter="focus(annotation)"
          data-ng-mouseleave="focus()"
          data-ng-repeat="annotation in annotations"
          class="paper summary">
        <div data-ng-model="$parent.annotation" class="annotation" />
      </li>
    </ul>
  </li>

  <!-- Details -->
  <li ng-class="detail && thread.message && 'show' || ''"
      class="annotator-outer annotator-viewer">
    <!-- Excerpts -->
    <div class="paper excerpt"
         ng-repeat="target in thread.message.annotation.target">
      <blockquote ng-bind="target.quote" ng-hide="diff" />
      <blockquote ng-bind-html-unsafe="target.diffHTML" ng-show="diff" />
      <div class="small pull-right" ng-show="target.diffHTML">
        <input type="checkbox" ng-model="diff">Show differences</input>
      </div>
    </div>
    <!-- Thread view -->
    <div data-recursive="" class="paper thread">
      <!-- Annotation -->
      <div class="detail annotation"
           name="annotation"
           ng-model="$parent.thread.message.annotation" />
      <!-- Replies -->
      <ul>
        <li data-ng-class="collapsed && 'collapsed' || ''"
            data-ng-repeat="thread in thread.children"
            data-ng-transclude=""
            class="thread">
          <a href="" class="threadexp"
             title="{{collapsed && 'Expand' || 'Collapse'}}""
             ng-click="collapsed = !collapsed" />
        </li>
      </ul>
    </div>
  </li>

</ul>
